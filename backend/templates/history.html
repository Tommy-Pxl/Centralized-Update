{% extends "base.html" %}
{% block content %}

<h1>{{ machine.hostname }} â€” Update History</h1>

{% if history|length == 0 %}
    <div class="alert alert-info mt-3">
        No updates have been recorded for this machine yet.
    </div>

    <a class="btn btn-secondary mt-3" href="/">Back</a>
    {% endblock %}
    {% return %}
{% endif %}

<table class="table table-striped table-bordered mt-3">
<thead>
<tr>
    <th>Date</th>
    <th>Package</th>
    <th>Old Version</th>
    <th>New Version</th>
    <th>Notes (raw output)</th>
</tr>
</thead>

<tbody>
{% for h in history %}
<tr>
    <td>{{ h.timestamp }}</td>
    <td>{{ h.package }}</td>
    <td>{{ h.old_version }}</td>
    <td>
        <span class="badge bg-info">{{ h.new_version }}</span>
    </td>
    <td style="white-space: pre-wrap; max-width: 600px;">
        <details>
            <summary class="text-primary" style="cursor:pointer;">View Output</summary>
            <pre>{{ h.notes }}</pre>
        </details>
    </td>
</tr>
{% endfor %}
</tbody>
</table>

<a class="btn btn-secondary" href="/">Back</a>

{% endblock %}
